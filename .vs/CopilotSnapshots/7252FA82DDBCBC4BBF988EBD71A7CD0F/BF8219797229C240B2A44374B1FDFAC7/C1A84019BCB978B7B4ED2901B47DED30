using System;
using CQuote.Calculadora.Core;

namespace CQuote.Calculadora.Core
{
    public class EnsambleService
    {
        public ProductoResultado CalcularEnsamble(decimal largo, decimal ancho, decimal areaLamina, decimal precioLamina, decimal porcentajeDesperdicio)
        {
            // Fórmula de corte ajustado y lámina con desperdicio
            decimal cantidadLaminas = (largo * ancho) / areaLamina;
            decimal precioConDesperdicio = cantidadLaminas * precioLamina * (1 + porcentajeDesperdicio);
            return new ProductoResultado
            {
                PrecioFinal = precioConDesperdicio,
                Margen = 0.25m, // Margen fijo de ejemplo
                Detalle = $"Cálculo con corte ajustado y lámina con desperdicio. Largo: {largo}, Ancho: {ancho}, Área lámina: {areaLamina}, Precio lámina: {precioLamina}, Desperdicio: {porcentajeDesperdicio}"
            };
        }
    }
}
